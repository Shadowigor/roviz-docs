<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>roviz: Storage &amp; Settings System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">roviz
   &#160;<span id="projectnumber">0.7</span>
   </div>
   <div id="projectbrief">Code Documentation of roviz</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Storage &amp; Settings System </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Itemframework provides a flexible, recursive xml serializer/deserializer.</p>
<p>Here's what we can serialize/deserialize:</p>
<ul>
<li>QStrings, Integers, Booleans and other basic types</li>
<li>Every type that can be converted into a string and can be converted back (via QVariant).</li>
<li>QStringList</li>
<li><code>QList&lt;T&gt;</code> and <code>QVector&lt;T&gt;</code> if you register <code>T</code> using <code>DomHelper::registerVariantListConverter&lt;T&gt;()</code> (before using it).</li>
<li><code>QHash&lt;QString,T&gt;</code> and <code>QMap&lt;QString,T&gt;</code> if you register <code>T</code> using <code>DomHelper::registerVariantMapConverter&lt;T&gt;()</code> (before using it).</li>
<li>Classes which contain the <code>Q_GADGET</code> macro or classes that are QObject derived, have the <code>Q_OBJECT</code> macro and a constructor with a <code>Q_INVOKABLE</code> macro.</li>
<li>Classes which have a custom serializer/deserializer registred using <code><a class="el" href="classDomHelper.html#a29f64fa48526ce9ec06e47acfb08b89f">DomHelper::registerSerializable</a></code>.</li>
</ul>
<p>Classes which contain the <code>Q_GADGET</code> or the <code>Q_OBJECT</code> macro are scanned for <code>Q_PROPERTIES</code> with <code>USER true</code>. If the type of the property can be serialized (according to the list above) the property will be serialized/deserialized. Otherwise a warning will be printed.</p>
<div class="fragment"><div class="line">class NumberFilterConfig</div><div class="line">{</div><div class="line">    Q_GADGET</div><div class="line">    Q_PROPERTY(int modulus READ modulus WRITE setModulus USER true)</div><div class="line">    //... more properties could be here </div><div class="line"></div><div class="line">public:</div><div class="line">    int modulus() const;</div><div class="line">    void setModulus(int modulus);</div><div class="line"></div><div class="line">private:</div><div class="line">    int _modulus = 1;</div><div class="line">};</div><div class="line"></div><div class="line">Q_DECLARE_METATYPE(NumberFilterConfig)</div></div><!-- fragment --><h2>Invoke the serializer</h2>
<p>The serializer/deserialized is part of the (static) <code><a class="el" href="classDomHelper.html" title="Class DomHelper acts as a helper class for storing and retrieving data to or from a DOM document...">DomHelper</a></code> class, which:</p>
<ul>
<li>can be used standalone. Checkout out the doxygen documentation of the <code><a class="el" href="classDomHelper.html" title="Class DomHelper acts as a helper class for storing and retrieving data to or from a DOM document...">DomHelper</a></code> class.</li>
<li>will be used to automatically serialize the <code>Q_PROPERTIES</code> of <code><a class="el" href="classAbstractItem.html" title="The AbstractItem class is the base class for all items. ">AbstractItem</a></code> subclasses.</li>
<li>can be used through the <code><a class="el" href="classSettingsScope.html" title="The SettingsScope class acts as a container for scoped settings. ">SettingsScope</a></code> class (see below).</li>
</ul>
<h2>Custom <code>load</code> and <code>save</code> behaviour for Items</h2>
<p>By default all <code><a class="el" href="classAbstractItem.html" title="The AbstractItem class is the base class for all items. ">AbstractItem</a></code> subclasses will get their <code>Q_PROPERTIES</code> serialized/deserialized automatically. If you wan't a different behaviour you can override <code><a class="el" href="classAbstractItem.html#aed5d0842924522bed01935f276151061" title="Loads persistent settings for this item from given XML element. ">AbstractItem::load</a></code> and <code><a class="el" href="classAbstractItem.html#af8ea06af550462d7d95eadc238f82d0b" title="Saves persistent settings for this item into the given XML element. ">AbstractItem::save</a></code>. This will give you full power about how the xml of that item is going to look.</p>
<div class="fragment"><div class="line">bool MyItem::save(QDomDocument&amp; doc, QDomElement&amp; element) const {</div><div class="line">    // Save the item&#39;s state into the passed element by either writing to it&#39;s attribues or by adding childs using doc.createElement();</div><div class="line"></div><div class="line">    // Return true if saving was sucessfull</div><div class="line">}</div><div class="line"></div><div class="line">bool MyItem::load(QDomElement&amp; element) {</div><div class="line">    // Restore the item&#39;s state from the passed element and return true on success</div><div class="line">}</div></div><!-- fragment --><h2>Global, hierarchical/overridable Settings (SettingScope)</h2>
<p>Sometimes you want to have a default setting and later override it with a custom value. E.g a default color palette for the application, which can be overridden on project level or item level. For that usecase we developed the <code><a class="el" href="classSettingsScope.html" title="The SettingsScope class acts as a container for scoped settings. ">SettingsScope</a></code> class.</p>
<p>Per default there is a scope per:</p>
<ul>
<li>application (exactly one, saved under $HOME/.config/... ),</li>
<li>workspace (one per workspace, saved in the workspace file),</li>
<li>project (one per project, saved in the project file),</li>
<li>and item (one per item instance, saved in the project file).</li>
</ul>
<p>A Scope holds a list of settings, whereas each setting has a key (string) and a value (any type that can be serialized using <a class="el" href="classDomHelper.html" title="Class DomHelper acts as a helper class for storing and retrieving data to or from a DOM document...">DomHelper</a>). Each scope has a parent scope from which it inherits it's settings unless the settings are overriden in the current scope. A Scope can be accessed using the <code>value</code>/<code>setValue</code> methods. If a setting in the current scopes changes (or in a parent scope without having a local override for it) the <code>valueChanged</code> signal will be invoked. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 12 2017 15:13:49 for roviz by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
